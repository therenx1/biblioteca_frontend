<main class="container mt-5">
    <div class="card shadow p-4" style="max-width: 700px; margin: auto; background-color: #f8f9fa;">
        <h2 class="mb-4 text-center">
            <i class="bi" [ngClass]="esEdicion ? 'bi-pencil-square text-warning' : 'bi-journal-plus text-success'"></i>
            {{ esEdicion ? 'Editar Libro' : 'Registrar Nuevo Libro' }}
        </h2>

        <form (ngSubmit)="guardar()" #libroForm="ngForm">
            <div class="mb-3" *ngIf="esEdicion">
                <label class="form-label fw-bold">ID Libro</label>
                <input type="text" class="form-control bg-light" [value]="nuevoLibro.id_libros" readonly>
            </div>

            <div class="row">
                <div class="col-md-12 mb-3">
                    <label class="form-label fw-bold">Título del Libro</label>
                    <input type="text" class="form-control" [(ngModel)]="nuevoLibro.titulo" name="titulo" required>
                </div>

                <div class="col-md-6 mb-3">
                    <label class="form-label fw-bold">ISBN</label>
                    <input type="text" class="form-control" [(ngModel)]="nuevoLibro.isbn" name="isbn" required>
                </div>

                <div class="col-md-6 mb-3">
                    <label class="form-label fw-bold">Editorial</label>
                    <input type="text" class="form-control" [(ngModel)]="nuevoLibro.editorial" name="editorial"
                        required>
                </div>

                <div class="col-md-6 mb-3">
                    <label class="form-label fw-bold">Año</label>
                    <input type="number" class="form-control" [(ngModel)]="nuevoLibro.anio" name="anio" required>
                </div>

                <div class="col-md-6 mb-3">
                    <label class="form-label fw-bold">Categoría</label>
                    <select class="form-select" [(ngModel)]="nuevoLibro.categoria" name="categoria"
                        [compareWith]="compararObjetos" required>
                        <option [ngValue]="undefined" disabled>Seleccione Categoría</option>
                        <option *ngFor="let cat of listadoCategorias" [ngValue]="cat">
                            {{ cat.nombreCategoria }}
                        </option>
                    </select>
                </div>

                <div class="col-md-12 mb-3">
                    <label class="form-label fw-bold">Autor</label>
                    <select class="form-select" [(ngModel)]="nuevoLibro.autores" name="autor"
                        [compareWith]="compararObjetos" required>
                        <option [ngValue]="undefined" disabled>Seleccione un Autor</option>
                        <option *ngFor="let aut of listadoAutores" [ngValue]="aut">
                            {{ aut.nombreAutores }}
                        </option>
                    </select>
                </div>
            </div>

            <div class="d-flex gap-2 mt-4 justify-content-center">
                <button type="submit" class="btn px-4" [ngClass]="esEdicion ? 'btn-warning' : 'btn-success'"
                    [disabled]="!libroForm.form.valid">
                    <i class="bi bi-check-circle"></i> {{ esEdicion ? 'Actualizar Cambios' : 'Grabar Libro' }}
                </button>
                <button type="button" class="btn btn-secondary px-4" (click)="cancelar()">
                    <i class="bi bi-arrow-left-circle"></i> Cancelar
                </button>
            </div>
        </form>
    </div>
</main>